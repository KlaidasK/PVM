{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MakePro</title>
    <link rel="stylesheet" href="{% static 'css/global.css' %}">
    <link rel="stylesheet" href="{% static 'css/teams.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    {% include 'include/navbar.html' %}

    {% if messages %}
    <div class="messages-container" style="margin: 20px auto; width: 80%;">
        {% for message in messages %}
            {% if "invitation" in message.tags %}
            <div style="padding: 10px; margin: 10px 0; border-radius: 5px; color: white;
                {% if message.tags == 'success invitation' %}
                    background-color: green;
                {% elif message.tags == 'info invitation' %}
                    background-color: blue;
                {% elif message.tags == 'error invitation' %}
                    background-color: red;
                {% endif %}">
                {{ message }}
            </div>
            {% endif %}
        {% endfor %}
    </div>
{% endif %}

    <main>
        <div class="search-container">
            <form method="get" autocomplete="off">
                <input type="text" placeholder="Search users.." name="search" value="{{ search_query }}">
                <button type="submit"><i class="fa fa-search"></i></button>
            </form>
        </div>

        <section class="presearch">
            <div class="users-container">
                <div class="head">
                    <p>Recommended Users:</p>
                </div>
                <div class="carousel">
                    {% for user_profile in users %}
                    <div class="card">
                        <div class="card-header">
                            <p>Username: {{ user_profile.username }}</p>
                            <p class="title">
                                <span>{{ user_profile.userprofile.first_name }} {{ user_profile.userprofile.last_name }}</span>
                            </p>
                            <p class="title">
                                <span>{{ user_profile.userprofile.bio }}</span>
                            </p>
                        </div>
                        <div class="card-footer">
                            <div class="description">
                                <p>Email:</p>
                                <p>{{ user_profile.email }}</p>
                            </div>
                            <form method="POST" action="{% url 'teams:send_invitation' team_id=team.id %}">
                                {% csrf_token %}
                                <input type="hidden" name="username" value="{{ user_profile.username }}">
                                <button type="submit" style="
                                    background-color: green; 
                                    color: white; 
                                    border: none; 
                                    padding: 5px 10px; 
                                    border-radius: 5px;
                                    cursor: pointer;">
                                    Send Invite
                                </button>
                            </form>
                        </div>
                    </div>
                    {% empty %}
                    <p>No users found for "{{ search_query }}"</p>
                    {% endfor %}
                </div>
            </div>
        </section>
    </main>

    <script src="{% static 'js/script.js' %}"></script>
</body>

</html>
